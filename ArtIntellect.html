<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ArtIntellect: AI-Powered IP Royalty Marketplace</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Modern Tech -->
    <!-- Application Structure Plan: The application structure remains a narrative-driven proposal but with a significant focus on dynamic presentation and micro-interactions. 1. Hero Section: Now features a canvas-based particle animation and text animations to create an immediate "wow" factor. 2. Sticky Header: A glassmorphism header that stays on top for easy navigation. 3. Animated Sections: All sections now fade and slide into view on scroll using an Intersection Observer for a modern, fluid experience. 4. Interactive Cards: Cards now have a 3D tilt effect on hover, making the UI feel more tangible. 5. Upgraded Simulator: Includes a more polished UI and a typewriter effect for AI-generated responses, enhancing the feeling of interacting with an intelligent system. 6. Animated Tech Stack: The ADO diagram now animates into view, with connectors drawing themselves to visually explain the workflow. This structure enhances the original narrative flow with engaging animations and interactions, making the content more digestible and impressive. -->
    <!-- Visualization & Content Choices: 1. Particle Animation: A vanilla JS particle system on a canvas is added to the hero background for visual appeal without impacting performance. Goal: Impress/Engage. 2. Scroll Animations: Vanilla JS Intersection Observer to trigger CSS animations. Goal: Guide user focus and add dynamism. 3. 3D Tilt Effect: CSS transforms on cards. Goal: Enhance interactivity and engagement. 4. Typewriter Effect: A JS function to simulate typing for AI responses. Goal: Make AI interaction feel more conversational and dynamic. 5. Animated SVG Connectors: The ADO diagram uses CSS animations to "draw" the connecting lines, making the technical architecture easier to follow. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #fdfcfb;
            color: #333745;
            overflow-x: hidden;
        }
        .animated-gradient {
            background: linear-gradient(-45deg, #e0eafc, #cfdef3, #eef2f3, #ffffff);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
        }
        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        .sticky-header {
            position: sticky;
            top: 0;
            z-index: 50;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            background-color: rgba(255, 255, 255, 0.8);
            transition: all 0.3s ease-in-out;
        }
        .hero-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }
        .hero-content {
            position: relative;
            z-index: 2;
        }
        .fade-in-section {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .fade-in-section.visible {
            opacity: 1;
            transform: translateY(0);
        }
        .card-3d {
            transition: transform 0.4s, box-shadow 0.4s;
            transform-style: preserve-3d;
        }
        .card-3d:hover {
            transform: perspective(1000px) rotateY(var(--rotateY)) rotateX(var(--rotateX)) scale3d(1.05, 1.05, 1.05);
            box-shadow: 0px 10px 30px -5px rgba(0, 0, 0, 0.2);
        }
        .btn-press {
            transition: transform 0.1s ease-in-out;
        }
        .btn-press:active {
            transform: scale(0.95);
        }
        .typewriter-output {
            white-space: pre-wrap;
            overflow: hidden;
        }
        .ado-connector {
            position: absolute;
            background-color: #cbd5e1;
            z-index: 0;
        }
    </style>
</head>
<body class="animated-gradient">
    <div class="min-h-screen">
        <header id="header" class="py-4 px-4 sm:px-6 lg:px-8 border-b border-gray-200/50">
            <div class="max-w-6xl mx-auto flex justify-between items-center">
                <h1 class="text-2xl font-bold text-[#4A90E2]">ArtIntellect</h1>
                <nav class="hidden md:flex items-center space-x-6">
                    <a href="#solution" class="text-gray-600 hover:text-[#4A90E2] transition-colors">Solution</a>
                    <a href="#assets" class="text-gray-600 hover:text-[#4A90E2] transition-colors">Assets</a>
                    <a href="#tech" class="text-gray-600 hover:text-[#4A90E2] transition-colors">Technology</a>
                </nav>
                <a href="#simulator" class="bg-[#4A90E2] text-white px-5 py-2 rounded-lg font-semibold hover:bg-opacity-80 transition btn-press shadow-sm hover:shadow-lg">Try Simulator</a>
            </div>
        </header>

        <main class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
            <section class="relative text-center py-24 md:py-32">
                <canvas id="hero-canvas" class="hero-canvas"></canvas>
                <div class="hero-content">
                    <h2 class="text-5xl md:text-7xl font-extrabold mb-4 animate-fade-in-up">
                        <span class="bg-clip-text text-transparent bg-gradient-to-r from-[#4A90E2] to-[#F5A623]">Monetize Creativity,</span> Intelligently.
                    </h2>
                    <p class="max-w-3xl mx-auto text-lg text-gray-600 animate-fade-in-up-delay">
                        ArtIntellect is a decentralized protocol on Andromeda that transforms the full spectrum of Intellectual Property into a liquid, investable asset class. We use AI and DeFi primitives to unlock the true value of creativity.
                    </p>
                </div>
            </section>

            <section class="mb-24 fade-in-section">
                <div class="text-center mb-12">
                     <h3 class="text-4xl font-bold">The Challenge for Modern Creators</h3>
                     <p class="text-gray-600 mt-2">Creators and innovators face significant barriers in leveraging their most valuable assets.</p>
                </div>
                <div class="grid md:grid-cols-3 gap-8">
                    <div class="card-3d bg-white/50 p-6 rounded-2xl text-center backdrop-blur-sm border border-white/30">
                        <div class="text-5xl mb-4">üîí</div>
                        <h4 class="font-bold text-xl mb-2">Illiquid Assets</h4>
                        <p class="text-gray-600">Future royalties from music, books, or patents are valuable but locked up and hard to access for upfront capital.</p>
                    </div>
                    <div class="card-3d bg-white/50 p-6 rounded-2xl text-center backdrop-blur-sm border border-white/30">
                        <div class="text-5xl mb-4">ü§î</div>
                        <h4 class="font-bold text-xl mb-2">Opaque Valuation</h4>
                        <p class="text-gray-600">Determining a fair, data-driven market price for a new piece of IP is complex, often relying on guesswork.</p>
                    </div>
                    <div class="card-3d bg-white/50 p-6 rounded-2xl text-center backdrop-blur-sm border border-white/30">
                        <div class="text-5xl mb-4">üí∏</div>
                        <h4 class="font-bold text-xl mb-2">Complex Revenue</h4>
                        <p class="text-gray-600">Royalty collection and distribution is often slow, inefficient, and lacks transparency for all stakeholders.</p>
                    </div>
                </div>
            </section>
            
            <section id="solution" class="mb-24 fade-in-section">
                <div class="text-center mb-12">
                     <h3 class="text-4xl font-bold">The ArtIntellect Solution</h3>
                     <p class="text-gray-600 mt-2">A seamless, automated flow from creation to monetization, powered by Andromeda.</p>
                </div>
                <div>
                    <div class="mb-8 flex justify-center flex-wrap gap-2 relative">
                        <button id="tab-1" class="tab-btn active px-5 py-2 rounded-full font-semibold z-10">1. Tokenize IP</button>
                        <button id="tab-2" class="tab-btn px-5 py-2 rounded-full font-semibold z-10">2. AI Valuation</button>
                        <button id="tab-3" class="tab-btn px-5 py-2 rounded-full font-semibold z-10">3. Fractionalize</button>
                        <button id="tab-4" class="tab-btn px-5 py-2 rounded-full font-semibold z-10">4. Automate & Trade</button>
                    </div>
                    <div class="bg-white/60 backdrop-blur-md border border-white/30 rounded-2xl p-8 min-h-[250px] flex items-center shadow-lg">
                        <div id="content-1" class="tab-content">
                            <h4 class="font-bold text-2xl mb-2 text-[#4A90E2]">Mint Your IP as a Digital Asset</h4>
                            <p class="text-gray-700 text-lg">A creator (musician, author, inventor) registers their intellectual property on ArtIntellect. This action mints a unique CW721 token (NFT) on the Andromeda blockchain, representing the undisputed ownership and origin of the master rights to that IP. This creates a permanent, verifiable record of the asset.</p>
                        </div>
                        <div id="content-2" class="tab-content hidden">
                            <h4 class="font-bold text-2xl mb-2 text-[#4A90E2]">Predictive Value Analysis</h4>
                            <p class="text-gray-700 text-lg">Our integrated AI oracle analyzes vast datasets‚Äîmarket trends, genre popularity, social media sentiment, and historical performance of similar assets‚Äîto generate a transparent valuation and predict the IP's future revenue potential. This provides a fair, data-driven foundation for its price.</p>
                        </div>
                        <div id="content-3" class="tab-content hidden">
                           <h4 class="font-bold text-2xl mb-2 text-[#4A90E2]">Fractionalize for Community Ownership</h4>
                           <p class="text-gray-700 text-lg">Based on the AI valuation, the creator fractionalizes a portion of their IP's future royalty stream into CW20 tokens. These "royalty shares" are then offered to fans and investors through a Crowdfund ADO, allowing the creator to raise capital while giving their community a stake in their success.</p>
                        </div>
                        <div id="content-4" class="tab-content hidden">
                           <h4 class="font-bold text-2xl mb-2 text-[#4A90E2]">Automated Royalties & Liquid Markets</h4>
                           <p class="text-gray-700 text-lg">All incoming royalties are automatically sent to a Splitter ADO, which instantly and transparently distributes the funds to the creator and all CW20 token holders. These fractional tokens can be freely traded on an integrated Marketplace or in AMM pools, creating a liquid secondary market for IP assets.</p>
                        </div>
                    </div>
                </div>
            </section>

            <section id="assets" class="mb-24 fade-in-section">
                <div class="text-center mb-12">
                     <h3 class="text-4xl font-bold">A Universe of Tokenizable Assets</h3>
                     <p class="text-gray-600 mt-2">ArtIntellect is built to support the full spectrum of human creativity and innovation.</p>
                </div>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
                    <div class="card-3d bg-white/50 p-6 rounded-xl text-center backdrop-blur-sm border border-white/30">
                        <div class="text-5xl mb-3">üé®</div><h4 class="font-bold text-lg">Creative Arts</h4><p class="text-sm text-gray-500">Music, Films, Digital Art</p>
                    </div>
                    <div class="card-3d bg-white/50 p-6 rounded-xl text-center backdrop-blur-sm border border-white/30">
                        <div class="text-5xl mb-3">üìö</div><h4 class="font-bold text-lg">Literary Works</h4><p class="text-sm text-gray-500">Books, Scripts, Articles</p>
                    </div>
                    <div class="card-3d bg-white/50 p-6 rounded-xl text-center backdrop-blur-sm border border-white/30">
                        <div class="text-5xl mb-3">üí°</div><h4 class="font-bold text-lg">Inventions</h4><p class="text-sm text-gray-500">Patents, Software, Tech</p>
                    </div>
                    <div class="card-3d bg-white/50 p-6 rounded-xl text-center backdrop-blur-sm border border-white/30">
                        <div class="text-5xl mb-3">üèõÔ∏è</div><h4 class="font-bold text-lg">Designs</h4><p class="text-sm text-gray-500">Fashion, Architectural</p>
                    </div>
                </div>
            </section>

            <section id="simulator" class="mb-24 fade-in-section bg-white/60 backdrop-blur-md border border-white/30 rounded-2xl p-8 shadow-2xl">
                <div class="text-center mb-12">
                     <h3 class="text-4xl font-bold">Interactive Simulator & AI Tools</h3>
                     <p class="text-gray-600 mt-2">See our AI valuation in practice and leverage your favorite AI for deeper insights.</p>
                </div>
                
                <div class="mb-8 max-w-2xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label for="providerSelect" class="font-semibold block mb-2 text-center">AI Provider</label>
                        <select id="providerSelect" class="w-full p-2 border rounded-lg bg-gray-50 text-center">
                            <option value="gemini">Google (Gemini)</option>
                            <option value="openai">OpenAI (GPT)</option>
                            <option value="anthropic">Anthropic (Claude)</option>
                            <option value="mistral">Mistral AI</option>
                            <option value="cohere">Cohere</option>
                            <option value="groq">Groq</option>
                            <option value="openrouter">OpenRouter</option>
                        </select>
                    </div>
                    <div>
                         <label for="apiKeyInput" class="font-semibold block mb-2 text-center">Enter Your API Key</label>
                         <input type="password" id="apiKeyInput" class="w-full p-2 border rounded-lg bg-gray-50 text-center" placeholder="Paste your API key here">
                    </div>
                </div>
                <div id="openRouterContainer" class="mb-8 max-w-2xl mx-auto hidden">
                    <label for="openRouterModelSelect" class="font-semibold block mb-2 text-center">OpenRouter Model</label>
                    <select id="openRouterModelSelect" class="w-full p-2 border rounded-lg bg-gray-50 text-center">
                        <option value="google/gemini-flash-1.5">Google: Gemini Flash 1.5</option>
                        <option value="openai/gpt-3.5-turbo">OpenAI: GPT-3.5 Turbo</option>
                        <option value="anthropic/claude-3-haiku">Anthropic: Claude 3 Haiku</option>
                        <option value="mistralai/mistral-7b-instruct">Mistral: 7B Instruct</option>
                        <option value="meta-llama/llama-3-8b-instruct">Meta: Llama 3 8B</option>
                    </select>
                </div>

                <div class="grid lg:grid-cols-5 gap-8 items-start">
                    <div class="lg:col-span-2 space-y-6">
                        <div>
                            <label for="ipType" class="font-semibold block mb-2">Type of Intellectual Property</label>
                            <select id="ipType" class="w-full p-2 border rounded-lg bg-gray-50">
                                <option value="music">Music Album</option>
                                <option value="book">Sci-Fi Novel</option>
                                <option value="patent">Green Tech Patent</option>
                                <option value="digital_art">Digital Art (NFT)</option>
                                <option value="blueprint">Architectural Blueprint</option>
                                <option value="podcast">Podcast Series</option>
                                <option value="trademark">Brand Trademark</option>
                            </select>
                        </div>
                        <div>
                            <label for="hypeSlider" class="font-semibold block mb-2">Initial Hype & Marketing (<span id="hypeValue">70</span>%)</label>
                            <input type="range" id="hypeSlider" min="10" max="100" value="70" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer" style="accent-color: #F5A623;">
                        </div>
                        <div>
                           <label class="font-semibold block mb-2">Creator's Share</label>
                           <div class="p-4 bg-gray-100 rounded-lg text-center">
                               <p class="text-2xl font-bold text-[#4A90E2]" id="creatorShare">70%</p>
                           </div>
                        </div>
                    </div>
                    <div class="lg:col-span-3 grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="w-full">
                            <h4 class="font-bold text-center mb-2">AI 5-Year Revenue Forecast</h4>
                            <div class="chart-container h-64 md:h-80">
                                <canvas id="revenueChart"></canvas>
                            </div>
                        </div>
                        <div class="w-full flex flex-col items-center">
                            <h4 class="font-bold text-center mb-2">Ownership Split</h4>
                            <div class="chart-container h-64 md:h-80 w-4/5 max-w-xs">
                                <canvas id="ownershipChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="mt-12 grid md:grid-cols-2 gap-8">
                    <div>
                        <button id="generateMarketing" class="btn-press w-full bg-[#4A90E2] text-white font-bold py-3 px-4 rounded-lg hover:bg-opacity-90 transition-all flex items-center justify-center gap-2 shadow-md hover:shadow-xl">
                            ‚ú® Generate Marketing Angles
                        </button>
                        <div id="marketingOutput" class="typewriter-output mt-4 p-4 bg-gray-50 rounded-lg border border-gray-200 text-sm text-gray-700">Select your AI provider and enter an API key, then click the button to generate marketing ideas.</div>
                    </div>
                    <div>
                        <button id="analyzeRisks" class="btn-press w-full bg-[#F5A623] text-white font-bold py-3 px-4 rounded-lg hover:bg-opacity-90 transition-all flex items-center justify-center gap-2 shadow-md hover:shadow-xl">
                            ‚ú® Analyze Investment Risks
                        </button>
                        <div id="risksOutput" class="typewriter-output mt-4 p-4 bg-gray-50 rounded-lg border border-gray-200 text-sm text-gray-700">Select your AI provider and enter an API key, then click for an AI-powered risk analysis.</div>
                    </div>
                </div>
            </section>
            
            <section id="tech" class="mb-16 fade-in-section">
                 <div class="text-center mb-16">
                     <h3 class="text-4xl font-bold">Built with Andromeda DeFi Legos</h3>
                     <p class="text-gray-600 mt-2">ArtIntellect seamlessly integrates Andromeda's core ADOs to create a robust and automated system.</p>
                </div>
                <div class="relative p-8 flex flex-col items-center space-y-16">
                    <div class="flex flex-col md:flex-row justify-around w-full max-w-5xl items-center">
                        <div class="ado-diagram-item bg-white p-4 rounded-lg shadow-lg text-center w-48">
                            <h5 class="font-bold text-lg">CW721</h5><p class="text-sm text-gray-500">IP as NFT</p>
                        </div>
                        <div class="ado-connector h-1 w-16 hidden md:block"></div>
                        <div class="ado-diagram-item bg-white p-4 rounded-lg shadow-lg text-center w-48">
                            <h5 class="font-bold text-lg">Crowdfund v2</h5><p class="text-sm text-gray-500">Public Sale</p>
                        </div>
                        <div class="ado-connector h-1 w-16 hidden md:block"></div>
                        <div class="ado-diagram-item bg-white p-4 rounded-lg shadow-lg text-center w-48">
                            <h5 class="font-bold text-lg">CW20</h5><p class="text-sm text-gray-500">Fractional Shares</p>
                        </div>
                    </div>
                     <div class="ado-connector w-1 h-16"></div>
                    <div class="flex flex-col-reverse md:flex-row justify-around w-full max-w-5xl items-center">
                         <div class="ado-diagram-item bg-white p-4 rounded-lg shadow-lg text-center w-48">
                            <h5 class="font-bold text-lg">Marketplace</h5><p class="text-sm text-gray-500">Secondary Trading</p>
                        </div>
                         <div class="ado-connector h-1 w-16 hidden md:block"></div>
                         <div class="ado-diagram-item bg-white p-4 rounded-lg shadow-lg text-center w-48">
                            <h5 class="font-bold text-lg">Splitter</h5><p class="text-sm text-gray-500">Revenue Distribution</p>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <footer class="bg-white/30 mt-20 border-t border-gray-200/50">
            <div class="max-w-6xl mx-auto py-6 px-4 sm:px-6 lg:px-8 text-center text-gray-500">
                <p>ArtIntellect Project Proposal for Andromeda Hackathon.</p>
                <p class="text-sm">Bridging Real World Assets and Automated DeFi.</p>
            </div>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Particle Animation
            const canvas = document.getElementById('hero-canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = canvas.parentElement.offsetHeight;

            let particlesArray;

            const mouse = {
                x: null,
                y: null,
                radius: 150
            };

            window.addEventListener('mousemove', (event) => {
                mouse.x = event.x;
                mouse.y = event.y;
            });

            class Particle {
                constructor(x, y, directionX, directionY, size, color) {
                    this.x = x;
                    this.y = y;
                    this.directionX = directionX;
                    this.directionY = directionY;
                    this.size = size;
                    this.color = color;
                }
                draw() {
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2, false);
                    ctx.fillStyle = this.color;
                    ctx.fill();
                }
                update() {
                    if (this.x > canvas.width || this.x < 0) {
                        this.directionX = -this.directionX;
                    }
                    if (this.y > canvas.height || this.y < 0) {
                        this.directionY = -this.directionY;
                    }
                    this.x += this.directionX;
                    this.y += this.directionY;
                    this.draw();
                }
            }

            function initParticles() {
                particlesArray = [];
                let numberOfParticles = (canvas.height * canvas.width) / 9000;
                for (let i = 0; i < numberOfParticles; i++) {
                    let size = (Math.random() * 2) + 1;
                    let x = (Math.random() * ((innerWidth - size * 2) - (size * 2)) + size * 2);
                    let y = (Math.random() * ((innerHeight - size * 2) - (size * 2)) + size * 2);
                    let directionX = (Math.random() * .4) - .2;
                    let directionY = (Math.random() * .4) - .2;
                    let color = 'rgba(74, 144, 226, 0.5)';
                    particlesArray.push(new Particle(x, y, directionX, directionY, size, color));
                }
            }

            function animateParticles() {
                requestAnimationFrame(animateParticles);
                ctx.clearRect(0, 0, innerWidth, innerHeight);
                for (let i = 0; i < particlesArray.length; i++) {
                    particlesArray[i].update();
                }
            }
            
            initParticles();
            animateParticles();

            window.addEventListener('resize', () => {
                canvas.width = window.innerWidth;
                canvas.height = canvas.parentElement.offsetHeight;
                initParticles();
            });


            // Scroll Animations
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                    }
                });
            }, { threshold: 0.1 });

            document.querySelectorAll('.fade-in-section').forEach(section => {
                observer.observe(section);
            });
            
            // 3D Card Effect
            const cards = document.querySelectorAll('.card-3d');
            cards.forEach(card => {
                card.addEventListener('mousemove', (e) => {
                    const rect = card.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    const { width, height } = rect;
                    const rotateX = (y / height - 0.5) * -20;
                    const rotateY = (x / width - 0.5) * 20;
                    card.style.setProperty('--rotateX', `${rotateX}deg`);
                    card.style.setProperty('--rotateY', `${rotateY}deg`);
                });
                card.addEventListener('mouseleave', () => {
                    card.style.setProperty('--rotateX', '0deg');
                    card.style.setProperty('--rotateY', '0deg');
                });
            });

            // Sticky Header
            const header = document.getElementById('header');
            window.addEventListener('scroll', () => {
                if (window.scrollY > 50) {
                    header.classList.add('shadow-md');
                } else {
                    header.classList.remove('shadow-md');
                }
            });

            // Tabs
            const tabs = document.querySelectorAll('.tab-btn');
            const contents = document.querySelectorAll('.tab-content');

            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    tabs.forEach(item => item.classList.remove('active', 'bg-[#4A90E2]', 'text-white'));
                    tab.classList.add('active', 'bg-[#4A90E2]', 'text-white');

                    const target = tab.id.replace('tab-', 'content-');
                    contents.forEach(content => {
                        content.classList.add('hidden');
                    });
                    const activeContent = document.getElementById(target);
                    activeContent.classList.remove('hidden');
                });
            });
            
            // Typewriter Effect
            function typeWriter(element, text, speed = 30) {
                let i = 0;
                element.innerHTML = "";
                function type() {
                    if (i < text.length) {
                        element.innerHTML += text.charAt(i);
                        i++;
                        setTimeout(type, speed);
                    }
                }
                type();
            }

            // Simulator Logic
            const ipTypeSelect = document.getElementById('ipType');
            const hypeSlider = document.getElementById('hypeSlider');
            const hypeValueSpan = document.getElementById('hypeValue');
            const creatorShareEl = document.getElementById('creatorShare');
            const apiKeyInput = document.getElementById('apiKeyInput');
            const providerSelect = document.getElementById('providerSelect');
            const openRouterContainer = document.getElementById('openRouterContainer');
            const openRouterModelSelect = document.getElementById('openRouterModelSelect');

            const revenueCtx = document.getElementById('revenueChart').getContext('2d');
            const ownershipCtx = document.getElementById('ownershipChart').getContext('2d');

            let revenueChart, ownershipChart;

            const baseData = {
                music: [10, 30, 60, 80, 70],
                book: [5, 15, 40, 65, 90],
                patent: [20, 25, 30, 40, 100],
                digital_art: [80, 50, 120, 60, 90],
                blueprint: [15, 20, 25, 30, 35],
                podcast: [5, 10, 25, 50, 80],
                trademark: [40, 45, 50, 55, 60]
            };

            function createRevenueChart(data) {
                if (revenueChart) {
                    revenueChart.destroy();
                }
                revenueChart = new Chart(revenueCtx, {
                    type: 'line',
                    data: {
                        labels: ['Year 1', 'Year 2', 'Year 3', 'Year 4', 'Year 5'],
                        datasets: [{
                            label: 'Predicted Revenue (in $1000s)',
                            data: data,
                            borderColor: '#4A90E2',
                            backgroundColor: 'rgba(74, 144, 226, 0.1)',
                            fill: true,
                            tension: 0.4,
                        }]
                    },
                    options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { y: { beginAtZero: true } } }
                });
            }

            function createOwnershipChart(creatorShare) {
                if (ownershipChart) {
                    ownershipChart.destroy();
                }
                const publicShare = 100 - creatorShare;
                ownershipChart = new Chart(ownershipCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Creator Share', 'Public Sale'],
                        datasets: [{
                            data: [creatorShare, publicShare],
                            backgroundColor: ['#4A90E2', '#F5A623'],
                            borderColor: '#fdfcfb',
                            borderWidth: 4,
                        }]
                    },
                    options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'bottom' } }, cutout: '70%' }
                });
            }

            function updateSimulator() {
                const ipType = ipTypeSelect.value;
                const hypeValue = parseInt(hypeSlider.value);
                hypeValueSpan.textContent = hypeValue;

                const base = baseData[ipType];
                const modifier = hypeValue / 100 + 0.5;
                const revenueData = base.map(d => Math.round(d * modifier));

                const creatorShare = Math.max(30, 90 - Math.round(hypeValue / 2));
                creatorShareEl.textContent = `${creatorShare}%`;

                createRevenueChart(revenueData);
                createOwnershipChart(creatorShare);
            }
            
            providerSelect.addEventListener('change', () => {
                if (providerSelect.value === 'openrouter') {
                    openRouterContainer.classList.remove('hidden');
                } else {
                    openRouterContainer.classList.add('hidden');
                }
            });

            ipTypeSelect.addEventListener('change', updateSimulator);
            hypeSlider.addEventListener('input', updateSimulator);

            updateSimulator();

            const generateMarketingBtn = document.getElementById('generateMarketing');
            const analyzeRisksBtn = document.getElementById('analyzeRisks');
            const marketingOutput = document.getElementById('marketingOutput');
            const risksOutput = document.getElementById('risksOutput');

            const callGenerativeAI = async (prompt) => {
                const apiKey = apiKeyInput.value;
                const provider = providerSelect.value;

                if (!apiKey) {
                    return "Please enter your API key to use this feature.";
                }

                let model;
                if (provider === 'openrouter') {
                    model = openRouterModelSelect.value;
                }

                const providerConfigs = {
                    gemini: {
                        url: `https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${apiKey}`,
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] }),
                        parser: (data) => data.candidates[0].content.parts[0].text
                    },
                    openai: {
                        url: 'https://api.openai.com/v1/chat/completions',
                        headers: { 'Content-Type': 'application/json', 'Authorization': `Bearer ${apiKey}` },
                        body: JSON.stringify({ model: "gpt-3.5-turbo", messages: [{ role: "user", content: prompt }] }),
                        parser: (data) => data.choices[0].message.content
                    },
                    anthropic: {
                        url: 'https://api.anthropic.com/v1/messages',
                        headers: { 'Content-Type': 'application/json', 'x-api-key': apiKey, 'anthropic-version': '2023-06-01' },
                        body: JSON.stringify({ model: "claude-3-haiku-20240307", max_tokens: 1024, messages: [{ role: "user", content: prompt }] }),
                        parser: (data) => data.content[0].text
                    },
                    mistral: {
                        url: 'https://api.mistral.ai/v1/chat/completions',
                        headers: { 'Content-Type': 'application/json', 'Authorization': `Bearer ${apiKey}` },
                        body: JSON.stringify({ model: "mistral-tiny", messages: [{ role: "user", content: prompt }] }),
                        parser: (data) => data.choices[0].message.content
                    },
                    cohere: {
                        url: 'https://api.cohere.com/v1/chat',
                        headers: { 'Content-Type': 'application/json', 'Authorization': `Bearer ${apiKey}` },
                        body: JSON.stringify({ model: "command-r", message: prompt }),
                        parser: (data) => data.text
                    },
                    groq: {
                        url: 'https://api.groq.com/openai/v1/chat/completions',
                        headers: { 'Content-Type': 'application/json', 'Authorization': `Bearer ${apiKey}` },
                        body: JSON.stringify({ model: "llama3-8b-8192", messages: [{ role: "user", content: prompt }] }),
                        parser: (data) => data.choices[0].message.content
                    },
                    openrouter: {
                        url: 'https://openrouter.ai/api/v1/chat/completions',
                        headers: { 'Content-Type': 'application/json', 'Authorization': `Bearer ${apiKey}` },
                        body: JSON.stringify({ model: model, messages: [{ role: "user", content: prompt }] }),
                        parser: (data) => data.choices[0].message.content
                    }
                };

                const config = providerConfigs[provider];
                if (!config) {
                    return "Invalid AI provider selected.";
                }

                try {
                    const response = await fetch(config.url, {
                        method: 'POST',
                        headers: config.headers,
                        body: config.body
                    });
                    
                    if (!response.ok) {
                        const errorBody = await response.text();
                        throw new Error(`API call failed with status: ${response.status}. Response: ${errorBody}`);
                    }
                    
                    const result = await response.json();
                    
                    if (result) {
                        return config.parser(result);
                    } else {
                        return "Sorry, I couldn't generate a response. The model's output was empty.";
                    }
                } catch (error) {
                    console.error(`${provider} API Error:`, error);
                    return `Sorry, an error occurred while contacting the ${provider} AI model: ${error.message}`;
                }
            };

            async function handleAIButtonClick(outputElement, prompt) {
                outputElement.innerHTML = `<div class="flex justify-center items-center h-full"><div class="loader"></div></div>`;
                const response = await callGenerativeAI(prompt);
                typeWriter(outputElement, response);
            }

            generateMarketingBtn.addEventListener('click', () => {
                const ipType = ipTypeSelect.options[ipTypeSelect.selectedIndex].text;
                const hypeLevel = hypeSlider.value > 75 ? "very high" : hypeSlider.value > 50 ? "high" : "moderate";
                const prompt = `You are a creative marketing strategist. Brainstorm 3 distinct and creative marketing angles for a new "${ipType}". The initial public hype is currently ${hypeLevel}. For each angle, provide a catchy slogan and a brief (1-2 sentence) description of the campaign idea. Format the output as clean HTML using <h4> for slogans and <p> for descriptions.`;
                handleAIButtonClick(marketingOutput, prompt);
            });

            analyzeRisksBtn.addEventListener('click', () => {
                const ipType = ipTypeSelect.options[ipTypeSelect.selectedIndex].text;
                const hypeLevel = hypeSlider.value > 75 ? "very high" : hypeSlider.value > 50 ? "high" : "moderate";
                const prompt = `You are a savvy investment analyst specializing in alternative assets. Provide a brief risk analysis for an investor considering buying fractional ownership in a new "${ipType}". The initial public hype is ${hypeLevel}. List 3 key potential risks and a brief (1-sentence) mitigation strategy for each. Format the output as an HTML unordered list (<ul>) with each list item (<li>) containing the risk in bold followed by the mitigation strategy.`;
                handleAIButtonClick(risksOutput, prompt);
            });
        });
    </script>
</body>
</html>
